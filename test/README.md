# CrewAI Platform æµ‹è¯•æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æœ¬æµ‹è¯•å¥—ä»¶ä¸º CrewAI Platform æä¾›å…¨é¢çš„åŠŸèƒ½æµ‹è¯•ï¼Œç¡®ä¿ç³»ç»Ÿçš„å„ä¸ªæ¨¡å—èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚

## ğŸ—ï¸ æµ‹è¯•ç»“æ„

### æµ‹è¯•åŸºç¡€è®¾æ–½

- **`test_config.py`** - æµ‹è¯•é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«APIç«¯ç‚¹ã€æµ‹è¯•è´¦å·ç­‰é…ç½®
- **`test_base.py`** - æµ‹è¯•åŸºç±»ï¼Œæä¾›é€šç”¨çš„æµ‹è¯•å·¥å…·å’Œæ–¹æ³•
- **`run_tests.py`** - ç»Ÿä¸€æµ‹è¯•æ‰§è¡Œè„šæœ¬ï¼Œæ”¯æŒé€‰æ‹©æ€§è¿è¡Œæµ‹è¯•

### æµ‹è¯•æ¨¡å—

| æ¨¡å— | æ–‡ä»¶ | æè¿° |
|------|------|------|
| ğŸ” è®¤è¯æµ‹è¯• | `test_auth.py` | ç™»å½•ã€ç™»å‡ºã€TokenéªŒè¯ç­‰è®¤è¯ç›¸å…³æµ‹è¯• |
| ğŸ¤– Agentç®¡ç†æµ‹è¯• | `test_agent_management.py` | Agentçš„CRUDæ“ä½œã€å…‹éš†ã€å¯ç”¨/ç¦ç”¨ç­‰åŠŸèƒ½æµ‹è¯• |
| ğŸ”§ MCPå·¥å…·ç®¡ç†æµ‹è¯• | `test_mcp_tool_management.py` | MCPå·¥å…·çš„CRUDæ“ä½œã€å¥åº·æ£€æŸ¥ç­‰åŠŸèƒ½æµ‹è¯• |
| ğŸ“š å­—å…¸ç®¡ç†æµ‹è¯• | `test_dictionary_management.py` | å­—å…¸çš„CRUDæ“ä½œã€æ ‘ç»“æ„ã€çˆ¶å­å…³ç³»ç­‰åŠŸèƒ½æµ‹è¯• |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼š

```bash
# å¯åŠ¨åç«¯æœåŠ¡
cd backend
python manage.py runserver
```

### 2. è¿è¡Œæµ‹è¯•

#### æŸ¥çœ‹å¯ç”¨æµ‹è¯•å¥—ä»¶

```bash
cd test
python run_tests.py --list
```

#### è¿è¡Œå•ä¸ªæµ‹è¯•å¥—ä»¶

```bash
# è¿è¡Œè®¤è¯æµ‹è¯•
python run_tests.py --suite auth

# è¿è¡ŒAgentç®¡ç†æµ‹è¯•
python run_tests.py --suite agent

# è¿è¡ŒMCPå·¥å…·ç®¡ç†æµ‹è¯•
python run_tests.py --suite mcp

# è¿è¡Œå­—å…¸ç®¡ç†æµ‹è¯•
python run_tests.py --suite dictionary
```

#### è¿è¡Œå¤šä¸ªæµ‹è¯•å¥—ä»¶

```bash
# è¿è¡Œè®¤è¯å’ŒAgentç®¡ç†æµ‹è¯•
python run_tests.py --suite auth,agent

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py --all
```

#### ä¿å­˜æµ‹è¯•æŠ¥å‘Š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•å¹¶ä¿å­˜æŠ¥å‘Š
python run_tests.py --all --save-report

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å
python run_tests.py --suite auth --save-report --output auth_report.txt
```

## ğŸ“Š æµ‹è¯•è´¦å·

æµ‹è¯•ä½¿ç”¨ä»¥ä¸‹è´¦å·ï¼š

| è´¦å·ç±»å‹ | ç”¨æˆ·å | å¯†ç  | ç”¨é€” |
|----------|--------|------|------|
| admin | admin | 1234qwer* | ç®¡ç†å‘˜è´¦å·ï¼Œç”¨äºæ‰€æœ‰æµ‹è¯• |
| testuser | testuser | testpass123 | æ™®é€šç”¨æˆ·è´¦å·ï¼Œç”¨äºæƒé™æµ‹è¯• |

## ğŸ”§ æµ‹è¯•é…ç½®

### APIé…ç½®

- **åŸºç¡€URL**: `http://localhost:8000/api`
- **è¶…æ—¶æ—¶é—´**: 30ç§’
- **æ—¥å¿—çº§åˆ«**: INFO

### æµ‹è¯•æ•°æ®

æµ‹è¯•ä¼šè‡ªåŠ¨åˆ›å»ºå’Œæ¸…ç†æµ‹è¯•æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š

- Agentæµ‹è¯•æ•°æ®
- MCPå·¥å…·æµ‹è¯•æ•°æ®
- å­—å…¸æµ‹è¯•æ•°æ®
- ç”¨æˆ·æµ‹è¯•æ•°æ®

## ğŸ“‹ æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…

### ğŸ” è®¤è¯æµ‹è¯• (`test_auth.py`)

| æµ‹è¯•ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|----------|------|----------|
| `test_admin_login_success` | ç®¡ç†å‘˜ç™»å½•æˆåŠŸ | è¿”å›200çŠ¶æ€ç å’Œè®¿é—®ä»¤ç‰Œ |
| `test_admin_login_failure` | ç®¡ç†å‘˜ç™»å½•å¤±è´¥ï¼ˆé”™è¯¯å¯†ç ï¼‰ | è¿”å›401çŠ¶æ€ç  |
| `test_invalid_username_login` | æ— æ•ˆç”¨æˆ·åç™»å½• | è¿”å›401çŠ¶æ€ç  |
| `test_empty_credentials_login` | ç©ºå‡­æ®ç™»å½• | è¿”å›400çŠ¶æ€ç  |
| `test_token_refresh` | Tokenåˆ·æ–° | è¿”å›æ–°çš„è®¿é—®ä»¤ç‰Œ |
| `test_token_validation` | TokenéªŒè¯ | æœ‰æ•ˆTokenå¯è®¿é—®APIï¼Œæ— æ•ˆTokenè¢«æ‹’ç» |
| `test_logout` | ç™»å‡ºåŠŸèƒ½ | ç™»å‡ºåæ— æ³•è®¿é—®å—ä¿æŠ¤API |
| `test_concurrent_login` | å¹¶å‘ç™»å½• | å¤šä¸ªç”¨æˆ·å¯åŒæ—¶ç™»å½• |

### ğŸ¤– Agentç®¡ç†æµ‹è¯• (`test_agent_management.py`)

| æµ‹è¯•ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|----------|------|----------|
| `test_get_llm_models` | è·å–å¯ç”¨LLMæ¨¡å‹ | è¿”å›å¯ç”¨æ¨¡å‹åˆ—è¡¨ |
| `test_create_agent` | åˆ›å»ºAgent | æˆåŠŸåˆ›å»ºAgentå¹¶è¿”å›ID |
| `test_get_agent_list` | è·å–Agentåˆ—è¡¨ | è¿”å›æ‰€æœ‰Agentåˆ—è¡¨ |
| `test_get_agent_detail` | è·å–Agentè¯¦æƒ… | è¿”å›æŒ‡å®šAgentçš„è¯¦ç»†ä¿¡æ¯ |
| `test_update_agent` | æ›´æ–°Agent | æˆåŠŸæ›´æ–°Agentä¿¡æ¯ |
| `test_clone_agent` | å…‹éš†Agent | æˆåŠŸå…‹éš†Agentå¹¶åˆ›å»ºæ–°å®ä¾‹ |
| `test_toggle_agent_status` | åˆ‡æ¢AgentçŠ¶æ€ | æˆåŠŸå¯ç”¨/ç¦ç”¨Agent |
| `test_disable_agent` | ç¦ç”¨Agent | ç¦ç”¨Agentä½†ä»ä¿ç•™åœ¨åˆ—è¡¨ä¸­ |
| `test_delete_agent` | åˆ é™¤Agent | æˆåŠŸåˆ é™¤Agent |

### ğŸ”§ MCPå·¥å…·ç®¡ç†æµ‹è¯• (`test_mcp_tool_management.py`)

| æµ‹è¯•ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|----------|------|----------|
| `test_create_mcp_tool` | åˆ›å»ºMCPå·¥å…· | æˆåŠŸåˆ›å»ºå·¥å…·å¹¶è¿”å›ID |
| `test_get_mcp_tool_list` | è·å–å·¥å…·åˆ—è¡¨ | è¿”å›æ‰€æœ‰MCPå·¥å…·åˆ—è¡¨ |
| `test_get_mcp_tool_detail` | è·å–å·¥å…·è¯¦æƒ… | è¿”å›æŒ‡å®šå·¥å…·çš„è¯¦ç»†ä¿¡æ¯ |
| `test_update_mcp_tool` | æ›´æ–°å·¥å…· | æˆåŠŸæ›´æ–°å·¥å…·ä¿¡æ¯ |
| `test_health_check` | å¥åº·æ£€æŸ¥ | è¿”å›å·¥å…·å¥åº·çŠ¶æ€ |
| `test_health_check_invalid_tool` | æ— æ•ˆå·¥å…·å¥åº·æ£€æŸ¥ | è¿”å›404çŠ¶æ€ç  |
| `test_disable_mcp_tool` | ç¦ç”¨å·¥å…· | ç¦ç”¨å·¥å…·ä½†ä»ä¿ç•™åœ¨åˆ—è¡¨ä¸­ |
| `test_delete_mcp_tool` | åˆ é™¤å·¥å…· | æˆåŠŸåˆ é™¤å·¥å…· |
| `test_mcp_tool_validation` | æ•°æ®éªŒè¯ | æ— æ•ˆæ•°æ®è¿”å›400çŠ¶æ€ç  |
| `test_mcp_tool_duplicate_name` | åç§°é‡å¤éªŒè¯ | é‡å¤åç§°è¿”å›400çŠ¶æ€ç  |

### ğŸ“š å­—å…¸ç®¡ç†æµ‹è¯• (`test_dictionary_management.py`)

| æµ‹è¯•ç”¨ä¾‹ | æè¿° | é¢„æœŸç»“æœ |
|----------|------|----------|
| `test_create_dictionary` | åˆ›å»ºå­—å…¸ | æˆåŠŸåˆ›å»ºå­—å…¸å¹¶è¿”å›ID |
| `test_get_dictionary_list` | è·å–å­—å…¸åˆ—è¡¨ | è¿”å›æ‰€æœ‰å­—å…¸åˆ—è¡¨ |
| `test_get_dictionary_detail` | è·å–å­—å…¸è¯¦æƒ… | è¿”å›æŒ‡å®šå­—å…¸çš„è¯¦ç»†ä¿¡æ¯ |
| `test_update_dictionary` | æ›´æ–°å­—å…¸ | æˆåŠŸæ›´æ–°å­—å…¸ä¿¡æ¯ |
| `test_create_dictionary_with_parent` | åˆ›å»ºå¸¦çˆ¶çº§çš„å­—å…¸ | æˆåŠŸåˆ›å»ºå­å­—å…¸å¹¶å»ºç«‹çˆ¶å­å…³ç³» |
| `test_get_dictionary_tree` | è·å–å­—å…¸æ ‘ç»“æ„ | è¿”å›å±‚çº§åŒ–çš„å­—å…¸æ ‘ |
| `test_dictionary_hierarchy` | å­—å…¸å±‚çº§å…³ç³» | éªŒè¯å¤šçº§å­—å…¸çš„çˆ¶å­å…³ç³» |
| `test_move_dictionary` | ç§»åŠ¨å­—å…¸ä½ç½® | æˆåŠŸæ”¹å˜å­—å…¸çš„çˆ¶çº§å…³ç³» |
| `test_delete_dictionary_with_children` | åˆ é™¤å¸¦å­çº§çš„å­—å…¸ | æœ‰å­çº§æ—¶æ‹’ç»åˆ é™¤ï¼Œæ— å­çº§æ—¶æˆåŠŸåˆ é™¤ |
| `test_dictionary_validation` | æ•°æ®éªŒè¯ | æ— æ•ˆæ•°æ®è¿”å›400çŠ¶æ€ç  |
| `test_dictionary_duplicate_name` | åç§°é‡å¤éªŒè¯ | é‡å¤åç§°è¿”å›400çŠ¶æ€ç  |

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥é”™è¯¯**
   - ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥APIåŸºç¡€URLé…ç½®æ˜¯å¦æ­£ç¡®

2. **è®¤è¯å¤±è´¥**
   - ç¡®ä¿æµ‹è¯•è´¦å·å­˜åœ¨ä¸”å¯†ç æ­£ç¡®
   - æ£€æŸ¥æ•°æ®åº“è¿æ¥

3. **æµ‹è¯•æ•°æ®æ¸…ç†å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“æƒé™
   - æ‰‹åŠ¨æ¸…ç†æµ‹è¯•æ•°æ®

### æ—¥å¿—æ–‡ä»¶

æµ‹è¯•è¿è¡Œæ—¶ä¼šç”Ÿæˆè¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºï¼š
```
test_{æµ‹è¯•å¥—ä»¶å}_{æ—¶é—´æˆ³}.log
```

### è°ƒè¯•æ¨¡å¼

å¦‚éœ€æ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼Œå¯ä»¥ä¿®æ”¹ `test_config.py` ä¸­çš„æ—¥å¿—çº§åˆ«ï¼š

```python
LOG_LEVEL = "DEBUG"  # æ”¹ä¸ºDEBUGçº§åˆ«
```

## ğŸ“ˆ æŒç»­é›†æˆ

### è‡ªåŠ¨åŒ–æµ‹è¯•

å¯ä»¥å°†æµ‹è¯•é›†æˆåˆ°CI/CDæµç¨‹ä¸­ï¼š

```bash
# åœ¨CIç¯å¢ƒä¸­è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py --all --save-report

# æ£€æŸ¥é€€å‡ºç 
if [ $? -eq 0 ]; then
    echo "æ‰€æœ‰æµ‹è¯•é€šè¿‡"
else
    echo "éƒ¨åˆ†æµ‹è¯•å¤±è´¥"
    exit 1
fi
```

### æµ‹è¯•è¦†ç›–ç‡

å»ºè®®å®šæœŸè¿è¡Œæµ‹è¯•å¹¶æ£€æŸ¥è¦†ç›–ç‡ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æ·»åŠ æ–°æµ‹è¯•

1. åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶ï¼Œç»§æ‰¿ `BaseTester`
2. å®ç°æµ‹è¯•æ–¹æ³•ï¼Œä½¿ç”¨æ–­è¨€éªŒè¯ç»“æœ
3. åœ¨ `run_tests.py` ä¸­æ³¨å†Œæ–°çš„æµ‹è¯•å¥—ä»¶
4. æ›´æ–°æœ¬æ–‡æ¡£

### æµ‹è¯•è§„èŒƒ

- æ¯ä¸ªæµ‹è¯•æ–¹æ³•åº”è¯¥æœ‰æ˜ç¡®çš„æè¿°
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•æ•°æ®
- ç¡®ä¿æµ‹è¯•çš„ç‹¬ç«‹æ€§å’Œå¯é‡å¤æ€§
- åŠæ—¶æ¸…ç†æµ‹è¯•æ•°æ®

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®
3. ç¡®ä¿åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ 